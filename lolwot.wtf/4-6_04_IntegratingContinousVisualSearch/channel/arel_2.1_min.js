var arelTEST=false;var arel={readyCallback:undefined,sceneReadyCallback:undefined,readyCalled:false,sceneReadyCalled:false,isReady:false,sceneIsReady:false,commandQueue:[],commandCachePerObject:{},callbackMethodIterator:0,objectIdIterator:0,Constants:{ANCHOR_NONE:0<<0,ANCHOR_LEFT:1<<0,ANCHOR_RIGHT:1<<1,ANCHOR_BOTTOM:1<<2,ANCHOR_TOP:1<<3,ANCHOR_CENTER_H:1<<4,ANCHOR_CENTER_V:1<<5,ANCHOR_TL:1<<0|1<<3,ANCHOR_TC:1<<3|1<<4,ANCHOR_TR:1<<3|1<<1,ANCHOR_CL:1<<5|1<<0,ANCHOR_CC:1<<4|1<<5,ANCHOR_CR:1<<5|1<<1,ANCHOR_BL:1<<2|1<<0,ANCHOR_BC:1<<2|1<<4,ANCHOR_BR:1<<2|1<<1,FLAG_NONE:0<<0,FLAG_IGNORE_ROTATION:1<<0,FLAG_IGNORE_ANIMATIONS:1<<1,FLAG_IGNORE_SCREEN_RESOLUTION:1<<2},Plugin:{},Config:{OBJECT_INTERFACE_CATEGORY:"object",OBJECT_POI:"poi",OBJECT_MODEL3D:"3d",OBJECT_IMAGE3D:"image3d",OBJECT_MOVIE3D:"movie3d",OBJECT_STATE_LOADING:"loading",OBJECT_STATE_READY:"ready",SCENE_CATEGORY:"scene",GESTUREHANDLER_CATEGORY:"gesturehandler",MEDIA_CATEGORY:"media",COMMAND_DELIMITER:";"},Debug:{active:false,ready:false,activeBrowser:false,stream:true,LOG:"log",ERROR:"error",LOGSTREAM:"logstream",debugContainer:undefined,debugContainerID:"arelDebugConsole",activate:function(){if(!arel.Debug.ready){arel.Debug.active=true;arel.Debug.debugContainer=document.createElement("div");arel.Debug.debugContainer.id=arel.Debug.debugContainerID;arel.Debug.debugContainer.setAttribute("style","font-family: Helvetica, Arial, sans-serif; margin: 0; font-size: .7em; position: absolute; top: 5px; left: 0px; z-index: 1000; width: 90%; height: 20%; background-color: white; overflow: scroll; padding: 5px;");var b=document.createElement("div");var a=document.createTextNode("AREL Debug console");b.setAttribute("style","font-weight: bold; padding: 0px 0px 10px 0px");b.appendChild(a);arel.Debug.debugContainer.appendChild(b);if(arel.isReady){arel.Debug.setDebugContainer()}}},setDebugContainer:function(){if(!arel.Debug.ready){document.body.appendChild(arel.Debug.debugContainer);arel.Debug.ready=true}},deactivate:function(){arel.Debug.active=false;arel.Debug.ready=false;var b=document.getElementById(arel.Debug.debugContainerID).parentNode;var a=document.getElementById(arel.Debug.debugContainerID);b.removeChild(a)},activateArelLogStream:function(){arel.Debug.stream=true},deactivateArelLogStream:function(){arel.Debug.stream=false},logStream:function(a){if(arel.Debug.active&&arel.Debug.stream&&arel.sceneIsReady){arel.Debug.out(a,arel.Debug.LOGSTREAM)}},log:function(b){var a=JSON.stringify(b);arel.Debug.out("Log: "+a,arel.Debug.LOG)},error:function(c){try{var b=JSON.stringify(c);var a="";arel.Debug.out("Error"+a+": "+b,arel.Debug.ERROR)}catch(d){arel.Debug.out("Error: "+d,arel.Debug.ERROR)}},out:function(d,c){if(arel.Debug.debugContainer!==undefined&&document.getElementById(arel.Debug.debugContainerID)!==null){var b=document.createElement("div");if(c===arel.Debug.LOG){b.setAttribute("style","color: #333")}else{if(c===arel.Debug.LOGSTREAM){b.setAttribute("style","font-style: italic")}else{if(c===arel.Debug.ERROR){b.setAttribute("style","color: #f33")}}}var a=document.createTextNode(d);b.appendChild(a);document.getElementById(arel.Debug.debugContainerID).insertBefore(b,document.getElementById(arel.Debug.debugContainerID).firstChild)}}},Tracking:{STATE_TRACKING:"tracking",STATE_EXTRAPOLATED:"extrapolated",STATE_NOTTRACKING:"not_tracking",GPS:"GPS",LLA_MARKER:"LLA",BARCODE_QR:"Code",MARKERLESS_3D:"ML3D",MARKERLESS_2D:"ML2D",MARKER:"Marker",INSTANT2D:"INSTANT_2D",INSTANT2DG:"INSTANT_2D_GRAVITY",INSTANT2DGE:"INSTANT_2D_GRAVITY_EXTRAPOLATED",INSTANT3D:"INSTANT_3D",OTHER:"other"},Error:{write:function(a){if(arel.Debug.active){arel.Debug.error(a);return false}else{if(arelTEST){return"ERROR: "+a}else{alert("ERROR: "+a);return false}}}},SceneCache:{id:undefined,appAPILevel:undefined},include:function(b){var c=document.getElementsByTagName("head")[0];var a=document.createElement("script");a.src=b;a.type="text/javascript";c.appendChild(a)},ready:function(a,b,c){if(c){arel.Debug.activeBrowser=true}if(b){arel.Debug.activate();arel.Debug.logStream("AREL is ready for execution.")}arel.readyCallback=a;if(arel.isReady){if(typeof(arel.readyCallback)==="function"&&arel.readyCalled===false){arel.readyCalled=true;arel.readyCallback();arel.ClientInterface.arelReady()}}},sceneReady:function(a,b,c){if(c){arel.Debug.activeBrowser=true;arel.Debug.logStream("Scene is ready.")}if(b){arel.Debug.activate()}arel.sceneReadyCallback=a;if(arel.sceneIsReady){if(typeof(arel.sceneReadyCallback)==="function"&&arel.sceneReadyCalled===false){if(arel.readyCalled===false){arel.readyCalled=true;arel.readyCallback()}arel.sceneReadyCalled=true;arel.sceneReadyCallback({id:arel.SceneCache.id})}}},sceneIsReadyForExecution:function(){if(typeof(arel.sceneReadyCallback)==="function"&&arel.sceneReadyCalled===false){arel.sceneReadyCalled=true;arel.sceneReadyCallback({id:arel.SceneCache.id})}arel.sceneIsReady=true},readyforexecution:function(a){if(arel.Debug.active){arel.Debug.setDebugContainer()}if(typeof(arel.readyCallback)==="function"&&arel.readyCalled===false){arel.readyCallback();arel.readyCalled=true}if(!arel.isReady){arel.ClientInterface.arelReady();arel.isReady=true}},flush:function(){var a="";if(arel.commandQueue.length>0){a=arel.commandQueue.join(arel.Config.COMMAND_DELIMITER);arel.commandQueue=[]}if(typeof Android!=="undefined"){Android.flush(a)}return a}};arel.ObjectCache={aObjects:[],setObjects:function(a){this.removeObjects();for(var b in a){if(typeof(a[b])!=="function"){this.addObject(a[b])}}},addObject:function(b,c){if(b instanceof arel.Object){b.setState(arel.Config.OBJECT_STATE_LOADING);if(b.getID()!==undefined){this.aObjects[b.getID()]=b;return true}else{return arel.Error.write("Object is missing an ID.")}}else{if(typeof(b)!=="function"){var a=undefined;if(b.hasOwnProperty("type")){if(b.type===arel.Config.OBJECT_POI){a=new arel.Object.POI()}else{if(b.type===arel.Config.OBJECT_MODEL3D){a=new arel.Object.Model3D()}else{if(b.type===arel.Config.OBJECT_MOVIE3D){a=arel.Object.Model3D.createFromMovie()}else{if(b.type===arel.Config.OBJECT_IMAGE3D){a=arel.Object.Model3D.createFromImage()}else{return arel.Error.write("ERROR: Unknown object category")}}}}a.create(b);if(a.getID()!==undefined){a.setState(arel.Config.OBJECT_STATE_LOADING);this.aObjects[a.getID()]=a;return true}else{return arel.Error.write("Object is missing an ID.")}}else{return arel.Error.write("An object category must be given.")}}}},getObjects:function(){var b=[];for(var a in this.aObjects){if(typeof(this.aObjects[a])!=="function"){b[a]=this.aObjects[a]}}return b},getObject:function(a){if(this.aObjects[a]!==undefined&&this.aObjects[a] instanceof arel.Object){return this.aObjects[a]}else{arel.Debug.out("Error: Object "+a+" does not exist.",arel.Debug.LOG);return false}},removeObjects:function(){this.aObjects=[]},removeObject:function(a){delete this.aObjects[a]},objectExists:function(a){return this.aObjects[a] instanceof arel.Object},setObjectStateToReady:function(a){this.aObjects[a].setState(arel.Config.OBJECT_STATE_READY)},setObjectState:function(b,a){this.aObjects[b].setState(a)}};arel.ClientInterface={protocol:"arel://",apilevel:"9",scene:{sceneTerm:"scene",addObject:function(b){arel.Debug.logStream("Object added to Scene: "+b.getID());var a=arel.ClientInterface.protocol+this.sceneTerm+"/addObject/"+b.toParameter();return arel.ClientInterface.out(a)},removeObjects:function(){arel.Debug.logStream("All objects removed.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/removeObjects/";return arel.ClientInterface.out(a)},removeObject:function(a){arel.Debug.logStream("Single object removed: "+a);var b=arel.ClientInterface.protocol+this.sceneTerm+"/removeObject/?id="+a;return arel.ClientInterface.out(b)},gestureHandlerAddObject:function(b,a){arel.Debug.logStream("Adding object to Gesture handler: "+b);var c=arel.ClientInterface.protocol+this.sceneTerm+"/gesturehandler/?id="+b+"&action=add";if(a!==undefined){c=c+"&group="+a}return arel.ClientInterface.out(c)},gestureHandlerRemoveObject:function(a){arel.Debug.logStream("Removing object from Gesture handler: "+a);var b=arel.ClientInterface.protocol+this.sceneTerm+"/gesturehandler/?id="+a+"&action=remove";return arel.ClientInterface.out(b)},gestureHandlerRemoveAllObjects:function(){arel.Debug.logStream("Removinging all objects from Gesture handler.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/gesturehandler/?action=removeall";return arel.ClientInterface.out(a)},getID:function(a){arel.Debug.logStream("asking for scene ID");var b=arel.ClientInterface.protocol+this.sceneTerm+"/getID/?callbackid="+a;return arel.ClientInterface.out(b)},switchChannel:function(c,a){arel.Debug.logStream("Switching Channel to "+c);var b=arel.ClientInterface.protocol+this.sceneTerm+"/switchChannel/?id="+c+a;return arel.ClientInterface.out(b)},setTrackingConfiguration:function(b){arel.Debug.logStream("Changing Tracking Configuration to "+b);var a=arel.ClientInterface.protocol+this.sceneTerm+"/setTrackingConfiguration/?tracking="+encodeURIComponent(b);return arel.ClientInterface.out(a)},startCamera:function(){arel.Debug.logStream("Starting camera.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/startCamera";return arel.ClientInterface.out(a)},stopCamera:function(){arel.Debug.logStream("Stopping camera.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/stopCamera";return arel.ClientInterface.out(a)},startTorch:function(){arel.Debug.logStream("Starting camera.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/startTorch";return arel.ClientInterface.out(a)},stopTorch:function(){arel.Debug.logStream("Stopping camera.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/stopTorch";return arel.ClientInterface.out(a)},setFreezeTracking:function(a){arel.Debug.logStream("setFreezeTracking: "+a);var b=arel.ClientInterface.protocol+this.sceneTerm+"/setFreezeTracking/?value="+a;return arel.ClientInterface.out(b)},triggerServerCall:function(b){arel.Debug.logStream("Triggering Server call.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/triggerServerCall/"+b;return arel.ClientInterface.out(a)},setLocation:function(a){arel.Debug.logStream("Setting LLA location to "+a);var b=arel.ClientInterface.protocol+this.sceneTerm+"/setLocation/"+a;return arel.ClientInterface.out(b)},getLocation:function(a){arel.Debug.logStream("Requesting location.");var b=arel.ClientInterface.protocol+this.sceneTerm+"/getLocation/?callbackid="+a;return arel.ClientInterface.out(b)},getScreenshot:function(a){arel.Debug.logStream("Requesting screenshot.");var b=arel.ClientInterface.protocol+this.sceneTerm+"/getScreenshot/"+a;return arel.ClientInterface.out(b)},getCompassRotation:function(a){arel.Debug.logStream("Requesting compass rotation.");var b=arel.ClientInterface.protocol+this.sceneTerm+"/getCompassRotation/?callbackid="+a;return arel.ClientInterface.out(b)},getTrackingValues:function(a){arel.Debug.logStream("Requesting tracking values.");var b=arel.ClientInterface.protocol+this.sceneTerm+"/getTrackingValues/?callbackid="+a;return arel.ClientInterface.out(b)},getObjectFromScreenCoordinates:function(a,b){arel.Debug.logStream("Requesting Object from screencoordinate "+a);var c=arel.ClientInterface.protocol+this.sceneTerm+"/getObjectFromScreenCoordinates/"+a+"&callbackid="+b;return arel.ClientInterface.out(c)},get3DPositionFromScreenCoordinates:function(a,d,b){arel.Debug.logStream("Requesting 3D coordinates for coordinate system "+d+" at screen location "+a);var c=arel.ClientInterface.protocol+this.sceneTerm+"/get3DPositionFromScreenCoordinates/"+a.toUpperCase()+"&coordinateSystemID="+d+"&callbackid="+b;return arel.ClientInterface.out(c)},getScreenCoordinatesFrom3DPosition:function(a,d,b){arel.Debug.logStream("Requesting 2D coordinates for coordinate system "+d+" at 3D position "+a);var c=arel.ClientInterface.protocol+this.sceneTerm+"/getScreenCoordinatesFrom3DPosition/"+a.toUpperCase()+"&coordinateSystemID="+d+"&callbackid="+b;return arel.ClientInterface.out(c)},startInstantTracking:function(a){arel.Debug.logStream("Request instant tracking type: "+a);var b=arel.ClientInterface.protocol+this.sceneTerm+"/startInstantTracking/"+a;return arel.ClientInterface.out(b)},shareScreenshot:function(){arel.Debug.logStream("Share screenshot.");var a=arel.ClientInterface.protocol+this.sceneTerm+"/sharescreenshot";return arel.ClientInterface.out(a)},requestVisualSearch:function(b){arel.Debug.logStream("Requesting visualsearch: "+b);var a=arel.ClientInterface.protocol+this.sceneTerm+"/requestvisualsearch/?database="+b;return arel.ClientInterface.out(a)}},object:{objectTerm:"object",edit:function(d,b,a){arel.Debug.logStream("Edit object "+d+"; set"+b);var c=arel.ClientInterface.protocol+this.objectTerm+"/set"+b+"/?id="+d+a;return arel.ClientInterface.handleObjectRequest(d,c,b)},startAnimation:function(c,a){arel.Debug.logStream("Start animation of Object "+c);var b=arel.ClientInterface.protocol+this.objectTerm+"/startAnimation/"+a;return arel.ClientInterface.handleObjectRequest(c,b)},stopAnimation:function(c,a){arel.Debug.logStream("stop animation of Object "+c);var b=arel.ClientInterface.protocol+this.objectTerm+"/stopAnimation/"+a;return arel.ClientInterface.handleObjectRequest(c,b)},pauseAnimation:function(c,a){arel.Debug.logStream("Pause animation of Object "+c);var b=arel.ClientInterface.protocol+this.objectTerm+"/pauseAnimation/"+a;return arel.ClientInterface.handleObjectRequest(c,b)},startMovieTexture:function(c,a){arel.Debug.logStream("Start movie texture of Object "+c);var b=arel.ClientInterface.protocol+this.objectTerm+"/startMovieTexture/"+a;return arel.ClientInterface.handleObjectRequest(c,b)},pauseMovieTexture:function(c,a){arel.Debug.logStream("Pause movie texture of Object "+c);var b=arel.ClientInterface.protocol+this.objectTerm+"/pauseMovieTexture/"+a;return arel.ClientInterface.handleObjectRequest(c,b)},stopMovieTexture:function(c,a){arel.Debug.logStream("Stop movie texture of Object "+c);var b=arel.ClientInterface.protocol+this.objectTerm+"/stopMovieTexture/"+a;return arel.ClientInterface.handleObjectRequest(c,b)},getIsRendered:function(b){arel.Debug.logStream("Requesting if object is rendered.");var a=arel.ClientInterface.protocol+this.objectTerm+"/isRendered/"+b;return arel.ClientInterface.out(a)}},navigate:{navigateTerm:"navigate",routeToOnGoogleMaps:function(a){arel.Debug.logStream("Route on Google maps");var b=arel.ClientInterface.protocol+this.navigateTerm+"/routeToOnGoogleMaps/"+a;return arel.ClientInterface.out(b)}},media:{mediaTerm:"media",website:function(a){arel.Debug.logStream("Handling url "+a);var b=arel.ClientInterface.protocol+this.mediaTerm+"/website/"+a;return arel.ClientInterface.out(b)},sound:function(a){arel.Debug.logStream("Handling sound "+a);var b=arel.ClientInterface.protocol+this.mediaTerm+"/sound/"+a;return arel.ClientInterface.out(b)},image:function(a){arel.Debug.logStream("Handling image "+a);var b=arel.ClientInterface.protocol+this.mediaTerm+"/image/"+a;return arel.ClientInterface.out(b)},video:function(a){arel.Debug.logStream("Handling fullscreen video "+a);var b=arel.ClientInterface.protocol+this.mediaTerm+"/video/"+a;return arel.ClientInterface.out(b)},vibrate:function(){arel.Debug.logStream("Handling vibration alert");var a=arel.ClientInterface.protocol+this.mediaTerm+"/vibrate";return arel.ClientInterface.out(a)}},junaio:{junaioTerm:"junaio",authenticate:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/authenticate/?callbackid="+a;return arel.ClientInterface.out(b)},signup:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/signup/?callbackid="+a;return arel.ClientInterface.out(b)},login:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/login/?callbackid="+a;return arel.ClientInterface.out(b)},logout:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/logout/?callbackid="+a;return arel.ClientInterface.out(b)},getHistory:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/getHistory/?callbackid="+a;return arel.ClientInterface.out(b)},manageFavorites:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/manageFavorites/"+a;return arel.ClientInterface.out(b)},getFavorites:function(a){var b=arel.ClientInterface.protocol+this.junaioTerm+"/getFavorites/?callbackid="+a;return arel.ClientInterface.out(b)}},arelReady:function(){var a=arel.ClientInterface.protocol+"arelReady/?apilevel="+arel.ClientInterface.apilevel;return arel.ClientInterface.out(a)},handleObjectRequest:function(c,a,b){if(arel.ObjectCache.getObject(c).getState()===arel.Config.OBJECT_STATE_READY){if(b&&(b=="Movie"||b=="Texture"||b=="Model")){arel.ObjectCache.getObject(c).setState(arel.Config.OBJECT_STATE_LOADING)}return arel.ClientInterface.out(a)}else{if(arel.commandCachePerObject[c]===undefined){arel.commandCachePerObject[c]=[a]}else{arel.commandCachePerObject[c].push(a)}return"Command stacked for "+c}},queueCachedObjectRequests:function(b){if(arel.commandCachePerObject[b]!==undefined){for(var a in arel.commandCachePerObject[b]){if(typeof(arel.commandCachePerObject[b][a])!=="function"){return arel.ClientInterface.out(arel.commandCachePerObject[b][a])}}delete arel.commandCachePerObject[b]}},out:function(a){if(arel.Debug.activeBrowser){console.debug(a)}else{if(arelTEST){return a}else{arel.commandQueue.push(a);window.location="arel://requestsPending"}}}};function urldecode(a){return decodeURIComponent((a+"").replace(/\+/g,"%20"))}arel.Parser={parseLocation:function(a){var b=new arel.LLA();if(a.lat!==undefined){if(this.validateLatitude(a.lat)){b.setLatitude(a.lat)}else{return arel.Error.write("Invalid Location")}}if(a.lng!==undefined){if(this.validateLongitude(a.lng)){b.setLongitude(a.lng)}else{return arel.Error.write("Invalid Location")}}if(a.lng!==undefined){b.setAltitude(a.alt)}else{b.setAltitude(0)}if(a.acc!==undefined){b.setAccuracy(a.acc)}return b},parseRotation:function(a){return new arel.Rotation(a.q1,a.q2,a.q3,a.q4)},parseScale:function(a){var b=new arel.Vector3D();if(a.x!==undefined&&a.y!==undefined&&a.z!==undefined){b=new arel.Vector3D(a.x,a.y,a.z)}else{return arel.Error.write("Invalid scale given")}return b},parseTranslation:function(a){var b=new arel.Vector3D();if(a.x!==undefined&&a.y!==undefined&&a.z!==undefined){b=new arel.Vector3D(a.x,a.y,a.z)}else{return arel.Error.write("Invalid translation given")}return b},parseOnScreen:function(b){var a=new arel.Vector2D();if(b.x!==undefined&&b.y!==undefined){a=new arel.Vector3D(b.x,b.y,b.z)}else{return arel.Error.write("Invalid onScreen given")}return a},parsePopUp:function(d,a){var c=undefined;var e=[];if(d.description){c=urldecode(d.description)}if(d.buttons&&d.buttons.length>0){for(var b in d.buttons){if(typeof(d.buttons[b])!=="function"){e[e.length]=new arel.PopupButton(urldecode(d.buttons[b][0]),urldecode(d.buttons[b][1]),urldecode(d.buttons[b][2]))}}}return new arel.Popup({buttons:e,description:c})},parseParameters:function(a){var c={};if(a){for(var b in a){if(typeof(a[b])!=="function"){c[urldecode(b)]=urldecode(a[b])}}}return c},validateLatitude:function(a){return !(a<-90||a>90)},validateLongitude:function(a){return !(a<-180||a>180)}};arel.Util={toParameter:function(d,b){var e="";var c=0;for(var a in d){if(typeof(d[a])!=="function"&&d[a]!==undefined){if(c===0&&!b){e+="?"+a+"="+encodeURIComponent(d[a])}else{e+="&"+a+"="+encodeURIComponent(d[a])}c++}}return e},clamp:function(c,a,b){return Math.min(Math.max(c,a),b)},vec3DToDeg:function(c){var a=c.getX()*180/Math.PI;var d=c.getY()*180/Math.PI;var b=c.getZ()*180/Math.PI;return new arel.Vector3D(a,d,b)},vec3DToRad:function(c){var a=c.getX()*Math.PI/180;var d=c.getY()*Math.PI/180;var b=c.getZ()*Math.PI/180;return new arel.Vector3D(a,d,b)},numberOfArelObjects:function(c){var b=0;for(var a in c){if(c[a] instanceof arel.Object){b++}}return b},getDistanceBetweenLocationsInMeter:function(g,e){if(!(g instanceof arel.LLA)||!(e instanceof arel.LLA)){return arel.Error.write("lla1 and lla2 must be of type arel.LLA")}var f=g.getLatitude();var i=g.getLongitude();var d=e.getLatitude();var h=e.getLongitude();var n=Math.PI/180;var m=6371009;var j=(f-d)*n;var b=(i-h)*n;var l=Math.pow(Math.sin(j/2),2)+Math.cos(f*n)*Math.cos(d*n)*Math.pow(Math.sin(b/2),2);var k=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return m*k}};arel.Object=function(){this.CATEGORY=arel.Config.OBJECT_INTERFACE_CATEGORY;this.id=undefined;this.title=undefined;this.popup=undefined;this.location=undefined;this.iconPath=undefined;this.thumbnailPath=undefined;this.minaccuracy=undefined;this.maxdistance=undefined;this.mindistance=undefined;this.state=undefined;this.parameters=undefined;this.visibility=undefined;this.setID=function(a){this.id=a};this.getID=function(){return this.id};this.setTitle=function(a){this.title=a;return arel.Scene.updateObject(this.id,"Title",a,arel.Util.toParameter({value:a},true))};this.getTitle=function(){return this.title};this.setPopup=function(b){this.popup=b;var a=this.popup.toParameterObject();return arel.Scene.updateObject(this.id,"Popup",this.popup,arel.Util.toParameter(a,true))};this.getPopup=function(){return this.popup};this.setLocation=function(a){if(!(a instanceof arel.LLA)){return arel.Error.write("_location must be of type arel.LLA")}this.location=a;var b=this.location.toParameterObject();return arel.Scene.updateObject(this.id,"Location",a,arel.Util.toParameter(b,true))};this.getLocation=function(){return this.location};this.setIcon=function(a){this.iconPath=a;return arel.Scene.updateObject(this.id,"Icon",a,arel.Util.toParameter({value:encodeURIComponent(a)},true))};this.getIcon=function(){return this.iconPath};this.setThumbnail=function(a){this.thumbnailPath=a;return arel.Scene.updateObject(this.id,"Thumbnail",a,arel.Util.toParameter({value:encodeURIComponent(a)},true))};this.getThumbnail=function(){return this.thumbnailPath};this.setMinAccuracy=function(a){this.minaccuracy=a;return arel.Scene.updateObject(this.id,"MinAccuracy",a,arel.Util.toParameter({value:a},true))};this.getMinAccuracy=function(){return this.minaccuracy};this.setMaxDistance=function(a){this.maxdistance=a;return arel.Scene.updateObject(this.id,"MaxDistance",a,arel.Util.toParameter({value:a},true))};this.getMaxDistance=function(){return this.maxdistance};this.setMinDistance=function(a){this.mindistance=a;return arel.Scene.updateObject(this.id,"MinDistance",a,arel.Util.toParameter({value:a},true))};this.getMinDistance=function(){return this.mindistance};this.setState=function(a){this.state=a};this.getState=function(){return this.state};this.getVisibility=function(){return this.visibility};this.setVisibility=function(a,d,b){var c=[];if(a!==undefined){this.visibility.liveview=a;if(a){c.liveview="true"}else{c.liveview="false"}}if(d!==undefined){this.visibility.maplist=d;if(d){c.maplist="true"}else{c.maplist="false"}}if(b!==undefined){this.visibility.radar=b;if(b){c.radar="true"}else{c.radar="false"}}return arel.Scene.updateObject(this.id,"Visibility",undefined,arel.Util.toParameter(c,true))};this.getParameters=function(){return this.parameters};this.getParameter=function(a){return this.parameters[a]};this.setParameters=function(a){this.parameters=a;return arel.Scene.updateObject(this.id,"Parameters",a,arel.Util.toParameter(a,true))};this.setParameter=function(d,a,c){var b=false;if(c){b=c}if(this.parameters){if(this.parameters[d]&&!b){return false}this.parameters[d]=a}else{arel.Debug.error("Error occured. Parameters missing");return false}return arel.Scene.updateObject(this.id,"Parameters",this.parameters,arel.Util.toParameter(this.parameters,true))};this.isRendered=function(a,b){var c=arel.CallbackInterface.addCallbackFunction(a,b);if(!c){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.object.getIsRendered(arel.Util.toParameter({id:this.id,callbackid:c}))};this.create=function(a){if(a.hasOwnProperty("id")){this.id=a.id}if(a.hasOwnProperty("title")){this.title=urldecode(a.title)}if(a.hasOwnProperty("location")){this.location=arel.Parser.parseLocation(a.location)}if(a.hasOwnProperty("iconPath")){this.iconPath=a.iconPath}if(a.hasOwnProperty("thumbnailPath")){this.thumbnailPath=a.thumbnailPath}if(a.hasOwnProperty("minaccuracy")){this.minaccuracy=a.minaccuracy}if(a.hasOwnProperty("maxdistance")){this.maxdistance=a.maxdistance}if(a.hasOwnProperty("mindistance")){this.mindistance=a.mindistance}if(a.hasOwnProperty("popup")){this.popup=arel.Parser.parsePopUp(a.popup,this.location)}if(a.hasOwnProperty("parameters")){this.parameters=arel.Parser.parseParameters(a.parameters)}if(a.hasOwnProperty("visibility")){this.visibility=a.visibility}if(a.category!==arel.Config.OBJECT_POI){if(a.hasOwnProperty("billboard")){this.billboard=a.billboard}if(a.hasOwnProperty("onscreen")){this.onscreen=arel.Parser.parseOnScreen(a.onscreen)}if(a.hasOwnProperty("rotation")){this.rotation=arel.Parser.parseRotation(a.rotation)}if(a.hasOwnProperty("translation")){this.translation=arel.Parser.parseTranslation(a.translation)}if(a.hasOwnProperty("scale")){this.scale=arel.Parser.parseScale(a.scale)}if(a.hasOwnProperty("occlusion")){this.occlusion=a.occlusion}if(a.hasOwnProperty("coordinateSystemID")){this.coordinateSystemID=a.coordinateSystemID}if(a.hasOwnProperty("model")){this.model=a.model}if(a.hasOwnProperty("texture")){this.texture=a.texture}if(a.hasOwnProperty("movie")){this.movie=a.movie}if(a.hasOwnProperty("transparency")){this.transparency=a.transparency}if(a.hasOwnProperty("renderorderposition")){this.renderorderposition=a.renderorderposition}if(a.hasOwnProperty("screenanchor")){this.screenanchor=a.screenanchor}if(a.hasOwnProperty("screenanchorflags")){this.screenanchorflags=a.screenanchorflags}if(a.hasOwnProperty("pickable")){this.pickable=a.pickable}}};this.toParameter=function(){var c=[];var k=undefined;if(this.TYPE){c.type=this.TYPE}if(this.id){c.id=this.id}if(this.title){c.title=this.title}if(this.location){var a=this.location.toParameterObject();for(k in a){if(typeof(a[k])!=="function"&&a[k]!==undefined){c[k]=a[k]}}}if(this.iconPath){c.iconPath=this.iconPath}if(this.thumbnailPath){c.thumbnailPath=this.thumbnailPath}if(this.maxdistance){c.maxdistance=this.maxdistance}if(this.mindistance){c.mindistance=this.mindistance}if(this.minaccuracy){c.minaccuracy=this.minaccuracy}if(this.popup){var d=this.popup.toParameterObject();for(k in d){if(typeof(d[k])!=="function"&&d[k]!==undefined){c[k]=d[k]}}}if(this.parameters!==undefined){for(var e in this.parameters){if(typeof(this.parameters[e])!=="function"){c["parameter_"+e]=this.parameters[e]}}}var h=true;for(var b in this.visibility){if(this.visibility.hasOwnProperty(b)){h=false;break}}if(!h){for(var e in this.visibility){if(typeof(this.visibility[e])!=="function"){c["visibility_"+e]=this.visibility[e]}}}if(this.TYPE!==arel.Config.OBJECT_POI){if(this.billboard!==undefined){c.billboard=this.billboard}if(this.onscreen){var l=this.onscreen.toParameterObject("onScreen");for(k in l){if(typeof(l[k])!=="function"&&l[k]!==undefined){c[k]=l[k]}}}if(this.translation&&!this.translation.isNULL()){var g=this.translation.toParameterObject("trans");for(k in g){if(typeof(g[k])!=="function"&&g[k]!==undefined){c[k]=g[k]}}}if(this.rotation&&!this.rotation.isNULL()){var f=this.rotation.toParameterObject("rot");for(k in f){if(typeof(f[k])!=="function"&&f[k]!==undefined){c[k]=f[k]}}}if(this.scale){var i=this.scale.toParameterObject("scale");for(k in i){if(typeof(i[k])!=="function"&&i[k]!==undefined){c[k]=i[k]}}}if(this.occlusion!==undefined&&this.occlusion){c.occlusion=this.occlusion}if(this.coordinateSystemID){c.coordinateSystemID=this.coordinateSystemID}if(this.model){c.model=this.model}if(this.texture){c.texture=this.texture}if(this.movie){c.movie=this.movie}if(this.transparency!==undefined&&this.transparency>0){c.transparency=this.transparency}if(this.renderorderposition!==undefined){c.renderorderposition=this.renderorderposition}if(this.screenanchor!==undefined){c.screenanchor=this.screenanchor}if(this.screenanchorflags!==undefined){c.screenanchorflags=this.screenanchorflags}if(this.pickable!==undefined&&!this.pickable){c.pickable=this.pickable}}return arel.Util.toParameter(c)};this.toString=function(){return this.toParameter()}};arel.Popup=function(a){this.aButtons=[];this.text=undefined;this.setButtons=function(b){this.aButtons=b};this.getButtons=function(){return this.aButtons};this.setDescription=function(b){this.text=b};this.getDescription=function(){return this.text};this.addButton=function(b){this.aButtons[this.aButtons.length]=b};this.init=function(){if(a.buttons){for(var b in a.buttons){if(a.buttons[b] instanceof arel.PopupButton){this.addButton(a.buttons[b])}else{if(a.buttons[b].length===3){this.addButton(new arel.PopupButton(a.buttons[b][0],a.buttons[b][1],a.buttons[b][2]))}}}}if(a.description){this.setDescription(a.description)}};this.toParameterObject=function(){var c={};if(this.text){c.popupDescription=this.text}var d=this.getButtons();if(d!==undefined&&d.length>0){for(var b in d){if(d[b] instanceof arel.PopupButton){c["popupButtonName"+b]=d[b].name;c["popupButtonId"+b]=d[b].id;c["popupButtonValue"+b]=d[b].value}}}return c};this.init()};arel.PopupButton=function(a,c,b){this.name=undefined;this.id=undefined;this.value=undefined;this.init=function(){this.name=a;this.id=c;this.value=b};this.init()};arel.PopupAttributes={buttons:undefined,description:undefined};arel.Scene={CATEGORY:arel.Config.SCENE_CATEGORY,getObjects:function(){return arel.ObjectCache.getObjects()},getObjectsFromCoordinateSystem:function(d){var a=arel.ObjectCache.getObjects();var c=[];for(var b in a){if(typeof(a[b]!=="function")){if(a[b].getCoordinateSystemID()==d){c.push(a[b])}}}return c},getID:function(){return arel.SceneCache.id},getAppAPILevel:function(){return arel.SceneCache.appAPILevel},getIDFromClient:function(){var a=arel.CallbackInterface.addCallbackFunction(_callback,caller);if(!a){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.getID(a)},setObjects:function(a){this.removeObjects();arel.ObjectCache.setObjects(a);a=arel.ObjectCache.getObjects();for(var b in a){if(a[b] instanceof arel.Object){arel.ClientInterface.scene.addObject(a[b])}}},removeObjects:function(){arel.ObjectCache.removeObjects();return arel.ClientInterface.scene.removeObjects()},addObject:function(a){if(arel.ObjectCache.addObject(a)){return arel.ClientInterface.scene.addObject(a)}else{return arel.Error.write("Object could not be added to the scene.")}},getObject:function(a){return arel.ObjectCache.getObject(a)},removeObject:function(a){var b=undefined;if(a instanceof arel.Object){b=a.getID()}else{b=a}if(b!==undefined){arel.ObjectCache.removeObject(b);return arel.ClientInterface.scene.removeObject(b)}else{return false}},getNumberOfObjects:function(){return arel.Util.numberOfArelObjects(arel.ObjectCache.getObjects())},switchChannel:function(b,a){var c="";if(a!==undefined){c=arel.Util.toParameter(a,true)}return arel.ClientInterface.scene.switchChannel(b,c)},setTrackingConfiguration:function(a){if(a!==arel.Tracking.MARKERLESS_3D&&a!==arel.Tracking.MARKERLESS_2D&&a!==arel.Tracking.MARKER&&a!==arel.Tracking.STATE_TRACKING&&a!==arel.Tracking.STATE_NOTTRACKING){return arel.ClientInterface.scene.setTrackingConfiguration(a)}return arel.Error.write("invalid tracking type given.")},startCamera:function(){return arel.ClientInterface.scene.startCamera()},stopCamera:function(){return arel.ClientInterface.scene.stopCamera()},startTorch:function(){return arel.ClientInterface.scene.startTorch()},stopTorch:function(){return arel.ClientInterface.scene.stopTorch()},setFreezeTracking:function(a){return arel.ClientInterface.scene.setFreezeTracking(a)},triggerServerCall:function(c,d,b){if(c){this.removeObjects()}for(var a in d){if(a.indexOf("filter_")===-1){delete d[a]}}if(b===true){d.sendScreenshot="true"}return arel.ClientInterface.scene.triggerServerCall(arel.Util.toParameter(d))},setLocation:function(a){return arel.ClientInterface.scene.setLocation(arel.Util.toParameter(a.toParameterObject()))},getLocation:function(a,b){var c=arel.CallbackInterface.addCallbackFunction(a,b);if(!c){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.getLocation(c)},getCompassRotation:function(a,b){var c=arel.CallbackInterface.addCallbackFunction(a,b);if(!c){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.getCompassRotation(c)},getTrackingValues:function(a,b){var c=arel.CallbackInterface.addCallbackFunction(a,b);if(!c){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.getTrackingValues(c)},getObjectFromScreenCoordinates:function(c,a,b){if(c===undefined||!(c instanceof arel.Vector2D)){return arel.Error.write("No screen coordinates given or screen coordinates of wrong type")}var d=arel.CallbackInterface.addCallbackFunction(a,b);if(!d){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.getObjectFromScreenCoordinates(arel.Util.toParameter(c),d)},get3DPositionFromScreenCoordinates:function(b,d,a){if(b===undefined||!(b instanceof arel.Vector2D)){return arel.Error.write("No screen coordinates given or screen coordinates of wrong type")}var c=arel.CallbackInterface.addCallbackFunction(a);if(!c){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.get3DPositionFromScreenCoordinates(arel.Util.toParameter(b),d,c)},getScreenCoordinatesFrom3DPosition:function(b,d,a){if(b===undefined||!(b instanceof arel.Vector3D)){return arel.Error.write("No 3d coordinates given or not of type arel.Vector3D")}var c=arel.CallbackInterface.addCallbackFunction(a);if(!c){return arel.Error.write("invalid callback given.")}return arel.ClientInterface.scene.getScreenCoordinatesFrom3DPosition(arel.Util.toParameter(b),d,c)},updateObject:function(f,b,e,a){if(f!==undefined){if(arel.ObjectCache.objectExists(f)){var d=this.getObject(f);d.setID(new Date().valueOf()+"_"+arel.objectIdIterator);var c=d.getState();arel.objectIdIterator++;d["set"+b](e);d.setID(f);arel.ObjectCache.addObject(d,true);arel.ObjectCache.setObjectState(f,c);return arel.ClientInterface.object.edit(f,b,a)}}},getScreenshot:function(a,f,e,b){var c=arel.CallbackInterface.addCallbackFunction(a,b);if(!c){return arel.Error.write("invalid callback given.")}var d={};d.callbackid=c;d.includeRender=f;d.bboxX=e.getX();d.bboxY=e.getY();return arel.ClientInterface.scene.getScreenshot(arel.Util.toParameter(d))},objectExists:function(a){var b=a;if(a instanceof arel.Object){b=a.getID()}return arel.ObjectCache.objectExists(b)},startInstantTracking:function(a){return arel.ClientInterface.scene.startInstantTracking(arel.Util.toParameter({value:a}))},shareScreenshot:function(){return arel.ClientInterface.scene.shareScreenshot()},requestVisualSearch:function(a){return arel.ClientInterface.scene.requestVisualSearch(a)}};arel.GestureHandler={CATEGORY:arel.Config.GESTUREHANDLER_CATEGORY,addObject:function(a,b){return arel.ClientInterface.scene.gestureHandlerAddObject(a,b)},removeObject:function(a){return arel.ClientInterface.scene.gestureHandlerRemoveObject(a)},removeObjects:function(){return arel.ClientInterface.scene.gestureHandlerRemoveAllObjects()}};arel.Events={DELIMITER:"::",REGEX_MEDIA_REMOVE_SPECIAL_CHARACTERS:/[^a-zA-Z0-9_]+/g,Scene:{ONLOAD:"onload",ONREADY:"onready",ONTRACKING:"ontracking",ONLOCATIONUPDATE:"onlocationupdate",ONVISUALSEARCHRESULT:"onvisualsearchresult"},Object:{ONTOUCHSTARTED:"ontouchstart",ONTOUCHENDED:"ontouchend",ONLOAD:"onload",ONREADY:"onready",ONANIMATIONENDED:"onanimationend",ONMOVIEENDED:"onmovieend",ONTRANSLATED:"ontranslated",ONSCALED:"onscaled",ONROTATED:"onrotated"},Media:{ONCLOSED:"onclose",ONSOUNDPLAYBACKCOMPLETE:"onsoundplaybackcomplete",WEBSITE_CLOSED:"WEBSITE_CLOSED",VIDEO_CLOSED:"VIDEO_CLOSED",SOUND_COMPLETE:"SOUND_COMPLETE"},GestureHandler:{TRANSLATING_START:"translating_start",TRANSLATING_END:"translating_end",SCALING_START:"scaling_start",SCALING_END:"scaling_end",ROTATING_START:"rotating_start",ROTATING_END:"rotating_end"},sceneEvents:{scene_onload:function(){return arel.Scene.setOptions()}},objectEvents:{},mediaEvents:{},gestureHandlerEvents:{},setListener:function(b,d,a){var c=undefined;if(typeof(b)!=="string"){c=b.CATEGORY}else{if(this.getMediaType(b)){c=this.getMediaType(b)}}if(b instanceof arel.Object){arel.Debug.logStream("Setting object listener");if(b.getID()===undefined){return arel.Error.write("Object ID unknown.")}c+=this.DELIMITER+b.getID();if(typeof(d)!=="function"){return arel.Error.write("callback must be a function, but is "+typeof(d))}this.objectEvents[c]=[d,a]}else{if(b.CATEGORY===arel.Config.SCENE_CATEGORY){arel.Debug.logStream("Setting scene listener");if(typeof(d)!=="function"){return arel.Error.write("callback must be a function, but is "+typeof(d))}this.sceneEvents[c]=[d,a]}else{if(b.CATEGORY===arel.Config.GESTUREHANDLER_CATEGORY){arel.Debug.logStream("Setting gesture handler listener");if(typeof(d)!=="function"){return arel.Error.write("callback must be a function, but is "+typeof(d))}this.gestureHandlerEvents[c]=[d,a]}else{if(b.CATEGORY===arel.Config.MEDIA_CATEGORY){arel.Debug.logStream("Setting Media listener");if(typeof(d)!=="function"){return arel.Error.write("callback must be a function, but is "+typeof(d))}this.mediaEvents[c]=[d,a]}else{if(this.getMediaType(b)){arel.Debug.logStream("Setting media listener");c+=this.DELIMITER+b.replace(this.REGEX_MEDIA_REMOVE_SPECIAL_CHARACTERS,"");c=c.toLowerCase();if(typeof(d)!=="function"){return arel.Error.write("callback must be a function, but is "+typeof(d))}this.mediaEvents[c]=[d,a]}else{return arel.Error.write("Unknown Element type")}}}}}return c},removeListener:function(c){var f=undefined;if(c instanceof arel.Object){f=c.CATEGORY+this.DELIMITER+c.getID()}else{if(c.CATEGORY===arel.Config.SCENE_CATEGORY){f=c.CATEGORY}else{if(c.CATEGORY===arel.Config.MEDIA_CATEGORY){f=c.CATEGORY}else{if(this.getMediaType(c)){f=this.getMediaType(c)+this.DELIMITER+c.replace(this.REGEX_MEDIA_REMOVE_SPECIAL_CHARACTERS,"")}else{if(typeof(c)==="string"){f=c}else{return arel.Error.write("no valid event ID or element given")}}}}}var b=f.split(this.DELIMITER);try{var a=b[0]}catch(d){return arel.Error.write("An incorrect event ID was passed.")}if(a!==undefined&&a===arel.Config.OBJECT_INTERFACE_CATEGORY){arel.Debug.logStream("Removing object listener");if(this.objectEvents[f]===undefined){return false}delete (this.objectEvents[f])}else{if(a!==undefined&&a===arel.Config.SCENE_CATEGORY){arel.Debug.logStream("Removing scene listener");if(this.sceneEvents[f]===undefined){return false}delete (this.sceneEvents[f])}else{if(a!==undefined&&this.validateMediaType(a)){arel.Debug.logStream("Removing media listener");f=f.toLowerCase();if(this.mediaEvents[f]===undefined){return false}delete (this.mediaEvents[f])}else{return false}}}return true},validateMediaType:function(a){return a===arel.Media.URL||a===arel.Media.SOUND||a===arel.Media.VIDEO},getMediaType:function(a){if(typeof(a)==="string"){var b=a.toLowerCase();if(b.indexOf(".mp4")!==-1||b.indexOf(".3g2")!==-1||b.indexOf(".3gp")!==-1){return arel.Media.VIDEO}else{if(b.indexOf(".mp3")!==-1){return arel.Media.SOUND}else{if(b.indexOf(".png")!==-1||b.indexOf(".jpg")!==-1||b.indexOf(".jpeg")!==-1||b.indexOf(".gif")!==-1){return arel.Media.WEBSITE}else{if(b.indexOf("http://")!==-1||b.indexOf("https://")!==-1||b.indexOf("html")!==-1||b.indexOf("php")!==-1||b.indexOf("htm")!==-1){return arel.Media.WEBSITE}else{return false}}}}}else{return false}},call:function(a,c,b){if(a===undefined){return false}if(a[0]===undefined||typeof(a[0])!=="function"){return arel.Error.write("Event callback function undefined or not a function.")}if(a[1]!==undefined){a[0].call(a[1],c,b)}else{a[0](c,b)}return true},callSceneEvent:function(b,c){if(b===arel.Events.Scene.ONREADY||b===arel.Events.Scene.ONLOAD){if(c!==undefined){if(c.id!==undefined){arel.SceneCache.id=c.id}if(c.apilevel!==undefined){arel.SceneCache.appAPILevel=c.apilevel}}if(b===arel.Events.Scene.ONREADY){arel.sceneIsReadyForExecution()}}arel.Debug.logStream("Scene event received. Type: "+b);var a=arel.Config.SCENE_CATEGORY;return arel.Events.call(this.sceneEvents[a],b,c)},callGestureEvent:function(c,b,e){arel.Debug.logStream("Gesture event received. Type: "+c);var g=new Array();for(var a in e){var d=arel.Scene.getObject(e[a]);if(d){g.push(d)}}var f=this.gestureHandlerEvents[arel.Config.GESTUREHANDLER_CATEGORY];if(f!==undefined){f[0].call(f[1],c,b,g);return true}return false},callGlobalMediaEvent:function(b,c){arel.Debug.logStream("Media event received. Type: "+b);var a=arel.Config.MEDIA_CATEGORY;return arel.Events.call(this.mediaEvents[a],b,c)},callObjectEvent:function(f,d,e){arel.Debug.logStream("Object event received for object "+f+". Type: "+d);var c=arel.Config.OBJECT_INTERFACE_CATEGORY+this.DELIMITER+f;if(d===arel.Events.Object.ONLOAD&&e!==undefined){arel.ObjectCache.addObject(e)}else{if(d===arel.Events.Object.ONREADY){if(arel.ObjectCache.objectExists(f)){arel.ObjectCache.setObjectStateToReady(f);arel.ClientInterface.queueCachedObjectRequests(f)}}else{if(d===arel.Events.Object.ONTRANSLATED){var b=arel.Scene.getObject(f);if(b){b.setTranslation(e.translation)}}else{if(d===arel.Events.Object.ONSCALED){var b=arel.Scene.getObject(f);if(b){b.setScale(e.scale)}}else{if(d===arel.Events.Object.ONROTATED){var b=arel.Scene.getObject(f);if(b){b.setRotation(e.rotation)}}}}}}var a=this.objectEvents[c];if(a===undefined){return false}if(a[0]===undefined||typeof(a[0])!=="function"){return arel.Error.write("Event callback function undefined or not a function.")}if(a[1]!==undefined){a[0].call(a[1],arel.Scene.getObject(f),d,e)}else{a[0](arel.Scene.getObject(f),d,e)}return true},callMediaEvent:function(a,c){arel.Debug.logStream("Media event received. Type: "+c);var b=this.getMediaType(a)+this.DELIMITER+a.replace(this.REGEX_MEDIA_REMOVE_SPECIAL_CHARACTERS,"");b=b.toLowerCase();return arel.Events.call(this.mediaEvents[b],c,a)},trigger:function(f,d,h){var c=undefined;if(f instanceof arel.Object&&d!==undefined){c=f.CATEGORY+this.DELIMITER+f.getID()}else{if(f.CATEGORY===arel.Config.SCENE_CATEGORY&&d!==undefined){c=f.CATEGORY}else{if(f.CATEGORY===arel.Config.MEDIA_CATEGORY&&d!==undefined){c=f.CATEGORY}else{if(this.getMediaType(f)&&d!==undefined){c=this.getMediaType(f)+this.DELIMITER+f.replace(this.REGEX_MEDIA_REMOVE_SPECIAL_CHARACTERS,"")}else{if(d!==undefined){c=f}else{return arel.Error.write("no valid event ID or element given")}}}}}var b=c.split(this.DELIMITER);try{var a=b[0]}catch(g){return arel.Error.write("An incorrect event listener ID was passed.")}if(a!==undefined&&a===arel.Config.OBJECT_INTERFACE_CATEGORY){return this.callObjectEvent(b[1],d,h)}else{if(a!==undefined&&a===arel.Config.SCENE_CATEGORY){return this.callSceneEvent(d,h)}else{if(a!==undefined&&this.validateMediaType(a)){return this.callMediaEvent(b[1],d,h)}else{return arel.Error.write("IdType is unknown - "+a)}}}}};arel.Vector3D=function(c,b,a){this.x=c;this.y=b;this.z=a;this.toString=function(){return this.x+","+this.y+","+this.z};this.setX=function(d){this.x=d};this.setY=function(d){this.y=d};this.setZ=function(d){this.z=d};this.getX=function(){return this.x};this.getY=function(){return this.y};this.getZ=function(){return this.z};this.toParameterObject=function(e){if(e===undefined){e=""}var d={};d[e+"X"]=this.getX();d[e+"Y"]=this.getY();d[e+"Z"]=this.getZ();return d};this.isNULL=function(){if(!this.getX()&&!this.getY()&&!this.getZ()){return true}if(this.getX()===0&&this.getY()===0&&this.getZ()===0){return true}}};arel.Vector3D.add=function(c,b){var a=new arel.Vector3D();a.setX(c.getX()+b.getX());a.setY(c.getY()+b.getY());a.setZ(c.getZ()+b.getZ());return a};arel.Vector3D.subtract=function(c,b){var a=new arel.Vector3D();a.setX(c.getX()-b.getX());a.setY(c.getY()-b.getY());a.setZ(c.getZ()-b.getZ());return a};arel.Rotation=function(a,d,c,b){this.init=function(e,h,g,f){if(e!==undefined){this.setX(e)}if(h!==undefined){this.setY(h)}if(g!==undefined){this.setZ(g)}if(f!==undefined){this.setW(f)}};this.getAxisAngle=function(){if(this.getW()>1){var f=Math.sqrt(Math.pow(this.getX(),2)+Math.pow(this.getY(),2)+Math.pow(this.getZ(),2)+Math.pow(this.getW(),2));this.setX(this.getX()/f);this.setY(this.getY()/f);this.setZ(this.getZ()/f);this.setW(this.getW()/f)}var h=2*Math.acos(this.getW());var g=Math.sqrt(1-Math.pow(this.getW(),2));var e=new arel.Vector3D();if(g<0.001){e=new arel.Vector3D(this.getX(),this.getY(),this.getZ())}else{e=new arel.Vector3D(this.getX()/g,this.getY()/g,this.getZ()/g)}return{axis:e,angle:h}};this.setFromAxisAngle=function(e,g){var f=Math.sin(g/2);this.init(e.getX()*f,e.getY()*f,e.getZ()*f,Math.cos(g/2))};this.getEulerAngleDegrees=function(){return arel.Util.vec3DToDeg(this.getEulerAngleRadians())};this.getEulerAngleRadians=function(){var i=Math.pow(this.getW(),2);var g=Math.pow(this.getX(),2);var f=Math.pow(this.getY(),2);var e=Math.pow(this.getZ(),2);var h=new arel.Vector3D();h.setZ(Math.atan2(2*(this.getX()*this.getY()+this.getZ()*this.getW()),(g-f-e+i)));h.setX(Math.atan2(2*(this.getY()*this.getZ()+this.getX()*this.getW()),(-g-f+e+i)));h.setY(Math.asin(arel.Util.clamp(-2*(this.getX()*this.getZ()-this.getY()*this.getW()),-1,1)));return h};this.setFromEulerAngleRadians=function(h){var k;k=h.getX()*0.5;var e=Math.sin(k);var m=Math.cos(k);k=h.getY()*0.5;var g=Math.sin(k);var o=Math.cos(k);k=h.getZ()*0.5;var p=Math.sin(k);var j=Math.cos(k);var q=o*j;var n=g*j;var i=o*p;var f=g*p;this.setX(e*q-m*f);this.setY(m*n+e*i);this.setZ(m*i-e*n);this.setW(m*q+e*f);if(this.getW()>1){var l=Math.sqrt(Math.pow(this.getX(),2)+Math.pow(this.getY(),2)+Math.pow(this.getZ(),2)+Math.pow(this.getW(),2));this.setX(this.getX()/l);this.setY(this.getY()/l);this.setZ(this.getZ()/l);this.setW(this.getW()/l)}};this.setFromEulerAngleDegrees=function(e){this.setFromEulerAngleRadians(arel.Util.vec3DToRad(e))};this.getMatrix=function(){var e=[];var i=Math.pow(this.getW(),2);var h=Math.pow(this.getX(),2);var g=Math.pow(this.getY(),2);var f=Math.pow(this.getZ(),2);if(Math.abs(h+g+f+i-1)>0.001){return arel.Error.write("Quaternion does not have the length == 1")}e[0]=1-2*g-2*f;e[1]=2*(this.getX()*this.getY()-this.getZ()*this.getW());e[2]=2*(this.getX()*this.getZ()+this.getY()*this.getW());e[3]=2*(this.getX()*this.getY()+this.getZ()*this.getW());e[4]=1-2*h-2*f;e[5]=2*(this.getY()*this.getZ()-this.getX()*this.getW());e[6]=2*(this.getX()*this.getZ()-this.getY()*this.getW());e[7]=2*(this.getX()*this.getW()+this.getY()*this.getZ());e[8]=1-2*h-2*g;return e};this.setFromMatrix=function(e){var i={};var h=1+e[0]+e[4]+e[8];var g=undefined;var f=undefined;if(h>0.0001){g=Math.sqrt(h)*2;f=1/g;i.x=(e[7]-e[5])*f;i.y=(e[2]-e[6])*f;i.z=(e[3]-e[1])*f;i.w=g*0.25}else{if((e[0]>e[4])&&(e[0]>e[8])){g=Math.sqrt(1+e[0]-e[4]-e[8])*2;f=1/g;i.x=g*0.25;i.y=(e[1]+e[3])*f;i.z=(e[2]+e[6])*f;i.w=(e[7]-e[5])*f}else{if(e[4]>e[8]){g=Math.sqrt(1+e[4]-e[0]-e[8])*2;f=1/g;i.x=(e[1]+e[3])*f;i.y=g*0.25;i.z=(e[5]+e[7])*f;i.w=(e[2]-e[6])*f}else{g=Math.sqrt(1+e[8]-e[0]-e[4])*2;f=1/g;i.x=(e[2]+e[6])*f;i.y=(e[5]+e[7])*f;i.z=g*0.25;i.w=(e[3]-e[1])*f}}}f=1/Math.sqrt(i.x*i.x+i.y*i.y+i.z*i.z+i.w*i.w);this.setX(i.x*f);this.setY(i.y*f);this.setZ(i.z*f);this.setW(i.w*f)};this.inverse=function(){var g=this.getMatrix();var e=[];e[0]=g[0];e[1]=g[3];e[2]=g[6];e[3]=g[1];e[4]=g[4];e[5]=g[7];e[6]=g[2];e[7]=g[5];e[8]=g[8];var f=new arel.Rotation();f.setFromMatrix(e);return f};this.toParameterObject=function(){var e={};e.q1=this.getX();e.q2=this.getY();e.q3=this.getZ();e.q4=this.getW();return e};this.init(a,d,c,b)};arel.Vector4D=function(c,b,a,d){this.x=c;this.y=b;this.z=a;this.w=d;this.toString=function(){return this.x+","+this.y+","+this.z+","+this.w};this.isNULL=function(){if(!this.getX()&&!this.getY()&&!this.getZ()&&!this.getW()){return true}if(this.getX()===0&&this.getY()===0&&this.getZ()===0){return true}};this.setX=function(e){this.x=e};this.setY=function(e){this.y=e};this.setZ=function(e){this.z=e};this.setW=function(e){this.w=e};this.getX=function(){return this.x};this.getY=function(){return this.y};this.getZ=function(){return this.z};this.getW=function(){return this.w}};arel.LLA=function(d,a,c,b){this.accuracy=undefined;this.init=function(h,e,g,f){if(h!==undefined){this.setLatitude(h)}if(e!==undefined){this.setLongitude(e)}if(g!==undefined){this.setAltitude(g)}if(f!==undefined){this.accuracy=f}};this.setLatitude=function(e){this.setX(e)};this.getLatitude=function(){return this.getX()};this.setLongitude=function(e){this.setY(e)};this.getLongitude=function(){return this.getY()};this.setAltitude=function(e){this.setZ(e)};this.getAltitude=function(){return this.getZ()};this.getAccuracy=function(){return this.accuracy};this.setAccuracy=function(e){this.accuracy=e};this.toParameterObject=function(){var e={};e.lat=this.getLatitude();e.lng=this.getLongitude();e.alt=this.getAltitude();return e};this.init(d,a,c,b)};arel.TrackingValues=function(b,a,m,f,e,d,c,h,k,i,g,j,l){this.translation=new arel.Vector3D(b,a,m);this.rotation=new arel.Rotation(f,e,d,c);this.coordinateSystemID=k;this.quality=h;this.type=i;this.state=g;this.content=j;this.coordinateSystemName=l;this.getState=function(){return this.state};this.setTranslation=function(n){this.translation=new arel.Vector3D(n.getX(),n.getY(),n.getZ())};this.setRotation=function(n){this.rotation=n};this.getTranslation=function(){return this.translation};this.getRotation=function(){return this.rotation};this.getQuality=function(){return this.quality};this.getCoordinateSystemID=function(){return this.coordinateSystemID};this.getCoordinateSystemName=function(){return this.coordinateSystemName};this.getType=function(){return this.type};this.getContent=function(){return this.content}};arel.Vector2D=function(b,a){this.x=b;this.y=a;this.setX=function(c){this.x=c};this.getX=function(){return this.x};this.setY=function(c){this.y=c};this.getY=function(){return this.y};this.toString=function(){return this.x+","+this.y};this.toParameterObject=function(d){if(d===undefined){d=""}var c={};c[d+"X"]=this.getX();c[d+"Y"]=this.getY();return c};this.isNULL=function(){if(!this.getX()&&!this.getY()){return true}if(this.getX()===0&&this.getY()===0){return true}}};arel.Image=function(d,a,c,b){this.imagebuffer=undefined;this.width=undefined;this.height=undefined;this.originUpperLeft=undefined;this.init=function(f,g,e,h){if(f!==undefined){this.imagebuffer=f}if(g!==undefined){this.width=g}if(e!==undefined){this.height=e}if(h!==undefined){this.originUpperLeft=h}};this.setImageBuffer=function(e){this.imagebuffer=e};this.getImageBuffer=function(){return this.imagebuffer};this.setWidth=function(e){this.width=e};this.getWidth=function(){return this.width};this.setHeight=function(e){this.height=e};this.getHeight=function(){return this.height};this.setOriginUpperLeft=function(e){this.originUpperLeft=e};this.isOriginUpperLeft=function(){return this.originUpperLeft};this.init(d,a,c,b)};arel.LLA.prototype=new arel.Vector3D;arel.LLA.prototype.constructor=arel.LLA;arel.LLA.prototype.parent=arel.Vector3D.prototype;arel.Rotation.prototype=new arel.Vector4D;arel.Rotation.prototype.constructor=arel.Rotation;arel.Rotation.prototype.parent=arel.Vector4D.prototype;arel.Object.POI=function(){this.TYPE=arel.Config.OBJECT_POI;this.getType=function(){return this.TYPE};this.init=function(){this.visibility={}};this.init()};arel.Object.POI.prototype=new arel.Object;arel.Object.POI.prototype.constructor=arel.Object.POI;arel.Object.POI.prototype.parent=arel.Object.prototype;arel.Object.Model3D=function(b,c,a){this.TYPE=arel.Config.OBJECT_MODEL3D;this.onscreen=undefined;this.translation=new arel.Vector3D(0,0,0);this.rotation=new arel.Rotation(0,0,0);this.scale=new arel.Vector3D(1,1,1);this.occlusion=false;this.model=undefined;this.texture=undefined;this.movie=undefined;this.coordinateSystemID=undefined;this.transparency=0;this.renderorderposition=undefined;this.screenanchor=undefined;this.screenanchorflags=undefined;this.pickable=true;this.animationSpeed=7;this.init=function(e,f,d){if(e!==undefined){this.id=e}if(f!==undefined){this.model=f}if(d!==undefined){this.texture=d}this.visibility={}};this.setScreenCoordinates=function(e){this.onscreen=e;var d=this.onscreen.toParameterObject("onScreen");return arel.Scene.updateObject(this.id,"ScreenCoordinates",e,arel.Util.toParameter(d,true))};this.getScreenCoordinates=function(){return this.onscreen};this.setTranslation=function(d){if(!(d instanceof arel.Vector3D)){return arel.Error.write("_translation must be of type arel.Vector3D")}this.translation=d;var e=this.translation.toParameterObject("trans");return arel.Scene.updateObject(this.id,"Translation",d,arel.Util.toParameter(e,true))};this.getTranslation=function(){return this.translation};this.setRotation=function(d){if(!(d instanceof arel.Rotation)){return arel.Error.write("_rotation must be of type arel.Rotation")}this.rotation=d;var e=this.rotation.toParameterObject("rot");return arel.Scene.updateObject(this.id,"Rotation",d,arel.Util.toParameter(e,true))};this.getRotation=function(){return this.rotation};this.setScale=function(d){if(!(d instanceof arel.Vector3D)){return arel.Error.write("_scale must be of type arel.Vector3D")}this.scale=d;var e=this.scale.toParameterObject("scale");return arel.Scene.updateObject(this.id,"Scale",d,arel.Util.toParameter(e,true))};this.getScale=function(){return this.scale};this.setOccluding=function(d){this.occlusion=d;return arel.Scene.updateObject(this.id,"Occluding",d,arel.Util.toParameter({value:d},true))};this.isOccluding=function(){return this.occlusion};this.getModel=function(){return this.model};this.setModel=function(d){this.model=d;return arel.Scene.updateObject(this.id,"Model",d,arel.Util.toParameter({value:d},true))};this.getTexture=function(){return this.texture};this.setTexture=function(d){this.texture=d;return arel.Scene.updateObject(this.id,"Texture",d,arel.Util.toParameter({value:d},true))};this.getMovie=function(){return this.movie};this.setMovie=function(d){this.movie=d;return arel.Scene.updateObject(this.id,"Movie",d,arel.Util.toParameter({value:d},true))};this.getCoordinateSystemID=function(){return this.coordinateSystemID};this.setCoordinateSystemID=function(d){this.coordinateSystemID=d;return arel.Scene.updateObject(this.id,"CoordinateSystemID",d,arel.Util.toParameter({value:d},true))};this.startAnimation=function(e,d){var f={id:this.id,animationname:e,loop:d};return arel.ClientInterface.object.startAnimation(this.id,arel.Util.toParameter(f))};this.pauseAnimation=function(){var d={id:this.id};return arel.ClientInterface.object.pauseAnimation(this.id,arel.Util.toParameter(d))};this.stopAnimation=function(){var d={id:this.id};return arel.ClientInterface.object.stopAnimation(this.id,arel.Util.toParameter(d))};this.setAnimationSpeed=function(d){this.animationSpeed=d;return arel.Scene.updateObject(this.id,"AnimationSpeed",d,arel.Util.toParameter({value:d},true))};this.getAnimationSpeed=function(){return this.animationSpeed};this.startMovieTexture=function(d){if(d===undefined){d=false}var e={id:this.id,loop:d};return arel.ClientInterface.object.startMovieTexture(this.id,arel.Util.toParameter(e))};this.pauseMovieTexture=function(){var d={id:this.id};return arel.ClientInterface.object.pauseMovieTexture(this.id,arel.Util.toParameter(d))};this.stopMovieTexture=function(){var d={id:this.id};return arel.ClientInterface.object.stopMovieTexture(this.id,arel.Util.toParameter(d))};this.setTransparency=function(d){this.transparency=d;return arel.Scene.updateObject(this.id,"Transparency",d,arel.Util.toParameter({value:d},true))};this.getTransparency=function(){return this.transparency};this.setRenderOrderPosition=function(d){this.renderorderposition=d;return arel.Scene.updateObject(this.id,"RenderOrderPosition",d,arel.Util.toParameter({value:d},true))};this.getRenderOrderPosition=function(){return this.renderorderposition};this.setScreenAnchor=function(d,e){this.screenanchor=d;if(e===undefined){this.screenanchorflags=arel.Constants.FLAG_IGNORE_SCREEN_RESOLUTION}else{this.screenanchorflags=e}if(arel.ObjectCache.objectExists(this.id)){return arel.ClientInterface.object.edit(this.id,"ScreenAnchor",arel.Util.toParameter({value:this.screenanchor,flags:this.screenanchorflags},true))}return false};this.getScreenAnchor=function(){return this.screenanchor};this.getScreenAnchorFlags=function(){return this.screenanchorflags};this.setPickingEnabled=function(d){this.pickable=d;return arel.Scene.updateObject(this.id,"PickingEnabled",d,arel.Util.toParameter({value:d},true))};this.isPickingEnabled=function(){return this.pickable};this.getType=function(){return this.TYPE};this.setType=function(d){this.TYPE=d};this.init(b,c,a)};arel.Object.Model3D.prototype=new arel.Object;arel.Object.Model3D.prototype.constructor=arel.Object.Model3D;arel.Object.Model3D.prototype.parent=arel.Object.prototype;arel.Object.Model3D.create=function(b,c,a){return new arel.Object.Model3D(b,c,a)};arel.Object.Model3D.createFromImage=function(c,a){var b=new arel.Object.Model3D(c,undefined,a);b.setType(arel.Config.OBJECT_IMAGE3D);return b};arel.Object.Model3D.createFromMovie=function(a,d,b){var c=new arel.Object.Model3D(a);c.setType(arel.Config.OBJECT_MOVIE3D);c.setMovie(d);return c};arel.Media={CATEGORY:arel.Config.MEDIA_CATEGORY,WEBSITE:"website",SOUND:"sound",VIDEO:"video",ACTION_OPEN:"open",ACTION_PLAY:"play",ACTION_CLOSE:"stop",ACTION_PAUSE:"pause",openWebsite:function(a,b){if(!b||b==="false"){b="false"}else{b="true"}return this.handleMedia(this.WEBSITE,a,this.ACTION_OPEN,b)},startSound:function(a){return this.handleMedia(this.SOUND,a,this.ACTION_PLAY,undefined)},pauseSound:function(a){return this.handleMedia(this.SOUND,a,this.ACTION_PAUSE,undefined)},stopSound:function(a){return this.handleMedia(this.SOUND,a,this.ACTION_CLOSE,undefined)},startVideo:function(a){return this.handleMedia(this.VIDEO,a,this.ACTION_PLAY)},triggerVibration:function(){return arel.ClientInterface.media.vibrate()},handleMedia:function(b,c,a,e){var d=[];if(c){d.url=c}if(e){d.external=e}if(a){d.action=a}if(b===this.WEBSITE){return arel.ClientInterface.media.website(arel.Util.toParameter(d))}else{if(b===this.VIDEO){return arel.ClientInterface.media.video(arel.Util.toParameter(d))}else{if(b===this.IMAGE){return arel.ClientInterface.media.image(arel.Util.toParameter(d))}else{if(b===this.SOUND){return arel.ClientInterface.media.sound(arel.Util.toParameter(d))}else{return arel.Error.write("Invalid media type")}}}}}};arel.Navigation={routeToObjectOnGoogleMaps:function(a){var b=[];if(a instanceof arel.Object){b.id=a.getID()}else{b.id=a}if(arel.ObjectCache.objectExists(b.id)){return arel.ClientInterface.navigate.routeToOnGoogleMaps(arel.Util.toParameter(b))}else{return arel.Error.write("Invalid location given")}},routeToGPSOnGoogleMaps:function(c,b,a){var d=[];if(arel.Parser.validateLatitude(c)&&arel.Parser.validateLongitude(b)){d.l=c+","+b+",0";if(a!==undefined){d.title=a}return arel.ClientInterface.navigate.routeToOnGoogleMaps(arel.Util.toParameter(d))}else{return arel.Error.write("Invalid location given")}}};arel.CallbackInterface={callbackHandler:{},addCallbackFunction:function(c,a){if(c&&typeof(c)==="function"){var b=String(new Date().valueOf())+"_"+arel.callbackMethodIterator;arel.callbackMethodIterator++;this.callbackHandler[b]=[c,a];return b}else{return arel.Error.write("callback needs to be specified.")}},removeCallbackFunction:function(a){if(this.callbackHandler[a]===undefined){return arel.Error.write("callback id not specified.")}delete (this.callbackHandler[a]);return true},callCallbackFunction:function(b,d){try{var a=this.callbackHandler[b];if(a===undefined){return arel.Error.write("Callbackinformation not found.")}if(a[0]===undefined||typeof(a[0])!=="function"){return arel.Error.write("Callback function undefined or not a function.")}if(a[1]!==undefined){a[0].call(a[1],d)}else{a[0](d)}arel.Debug.logStream("Incoming callback information from renderer.");this.removeCallbackFunction(b)}catch(c){return arel.Error.write("Error calling callback."+c)}return true}};if(!arelTEST){if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);arel.readyforexecution()}}else{if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);arel.readyforexecution()}}}}if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",arel.readyforexecution,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",arel.readyforexecution)}}}else{arel.readyforexecution()};